{"remainingRequest":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/babel-loader/lib/index.js!/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/src/auth.js","dependencies":[{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/src/auth.js","mtime":1586393644781},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKZXhwb3J0IGRlZmF1bHQgewogIC8qKgogICAqIFJldHVybnMgdGhlIGF1dGhlbnRpY2F0aW9uIHRva2VuIGZyb20gbG9jYWwgc3RvcmFnZS4KICAgKi8KICBnZXRUb2tlbjogZnVuY3Rpb24gZ2V0VG9rZW4oKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0F1dGhvcml6YXRpb24nKTsKICAgIH0gY2F0Y2ggKF91bnVzZWQpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfSwKCiAgLyoqCiAgICogUGFyc2VzIGFuZCBzYXZlcyB0aGUgYXV0aGVudGljYXRpb24gdG9rZW4uCiAgICogQHBhcmFtIHtTdHJpbmd9IHRva2VuIEEgSldUIGVuY29kZWQgdG9rZW4uCiAgICovCiAgc2F2ZVRva2VuOiBmdW5jdGlvbiBzYXZlVG9rZW4odG9rZW4pIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdBdXRob3JpemF0aW9uJywgdG9rZW4pOwogIH0sCgogIC8qKgogICAqIEludmFsaWRhdGVzIHRoZSBsb2NhbCBhdXRoZW50aWNhdGlvbiB0b2tlbi4KICAgKi8KICBkZXN0cm95VG9rZW46IGZ1bmN0aW9uIGRlc3Ryb3lUb2tlbigpIHsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdBdXRob3JpemF0aW9uJyk7CiAgfSwKCiAgLyoqCiAgICogUmV0dXJucyB0aGUgdXNlciByZXByZXNlbnRlZCBieSB0aGUgYXV0aGVudGljYXRpb24gdG9rZW4gKG51bGwgaWYgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZCkuCiAgICogQGZ1bmN0aW9uCiAgICovCiAgZ2V0VXNlcjogZnVuY3Rpb24gZ2V0VXNlcigpIHsKICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdBdXRob3JpemF0aW9uJyk7CiAgICB2YXIgdXNlciA9IG51bGw7IC8vIElmIGEgdG9rZW4gZXhpc3RzIHRoZW4gZGVjb2RlIGl0CgogICAgaWYgKHRva2VuKSB7CiAgICAgIHZhciBiYXNlNjRVcmwgPSB0b2tlbi5zcGxpdCgnLicpWzFdOwogICAgICB2YXIgYmFzZTY0ID0gYmFzZTY0VXJsLnJlcGxhY2UoLy0vZywgJysnKS5yZXBsYWNlKC9fL2csICcvJyk7CiAgICAgIHZhciBzZWNvbmRzU2luY2VFcG9jaCA9IG5ldyBEYXRlKCkgLyAxMDAwOwogICAgICB2YXIgcGFyc2VkVG9rZW4gPSBKU09OLnBhcnNlKHdpbmRvdy5hdG9iKGJhc2U2NCkpOyAvLyBJZiBjdXJyZW50IGRhdGUgaXMgYWZ0ZXIgZXhwaXJhdGlvbiBkYXRlIHRoZW4gZGVzdHJveSBpdAoKICAgICAgaWYgKHNlY29uZHNTaW5jZUVwb2NoID4gcGFyc2VkVG9rZW4uZXhwKSB7CiAgICAgICAgdGhpcy5kZXN0cm95VG9rZW4oKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB1c2VyID0gcGFyc2VkVG9rZW47CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdXNlcjsKICB9LAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ0F1dGhvcml6YXRpb24nKTsKICB9Cn07"},{"version":3,"sources":["/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/src/auth.js"],"names":["getToken","localStorage","getItem","saveToken","token","setItem","destroyToken","removeItem","getUser","user","base64Url","split","base64","replace","secondsSinceEpoch","Date","parsedToken","JSON","parse","window","atob","exp","logout"],"mappings":";;;;AAAA,eAAe;AACb;;;AAGAA,EAAAA,QAAQ,EAAE,oBAAW;AACnB,QAAI;AACF,aAAOC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAP;AACD,KAFD,CAEE,gBAAM;AACN,aAAO,IAAP;AACD;AACF,GAVY;;AAWb;;;;AAIAC,EAAAA,SAfa,qBAeHC,KAfG,EAeI;AACfH,IAAAA,YAAY,CAACI,OAAb,CAAqB,eAArB,EAAsCD,KAAtC;AACD,GAjBY;;AAkBb;;;AAGAE,EAAAA,YArBa,0BAqBE;AACbL,IAAAA,YAAY,CAACM,UAAb,CAAwB,eAAxB;AACD,GAvBY;;AAwBb;;;;AAIAC,EAAAA,OA5Ba,qBA4BH;AACR,QAAMJ,KAAK,GAAGH,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAd;AACA,QAAIO,IAAI,GAAG,IAAX,CAFQ,CAIR;;AACA,QAAIL,KAAJ,EAAW;AACT,UAAMM,SAAS,GAAGN,KAAK,CAACO,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAlB;AACA,UAAMC,MAAM,GAAGF,SAAS,CAACG,OAAV,CAAkB,IAAlB,EAAwB,GAAxB,EAA6BA,OAA7B,CAAqC,IAArC,EAA2C,GAA3C,CAAf;AACA,UAAMC,iBAAiB,GAAG,IAAIC,IAAJ,KAAa,IAAvC;AACA,UAAMC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,IAAP,CAAYR,MAAZ,CAAX,CAApB,CAJS,CAMT;;AACA,UAAIE,iBAAiB,GAAGE,WAAW,CAACK,GAApC,EAAyC;AACvC,aAAKf,YAAL;AACD,OAFD,MAEO;AACLG,QAAAA,IAAI,GAAGO,WAAP;AACD;AACF;;AAED,WAAOP,IAAP;AACD,GAhDY;AAiDba,EAAAA,MAjDa,oBAiDJ;AACPrB,IAAAA,YAAY,CAACM,UAAb,CAAwB,eAAxB;AACD;AAnDY,CAAf","sourcesContent":["export default {\n  /**\n   * Returns the authentication token from local storage.\n   */\n  getToken: function() {\n    try {\n      return localStorage.getItem('Authorization');\n    } catch {\n      return null;\n    }\n  },\n  /**\n   * Parses and saves the authentication token.\n   * @param {String} token A JWT encoded token.\n   */\n  saveToken(token) {\n    localStorage.setItem('Authorization', token);\n  },\n  /**\n   * Invalidates the local authentication token.\n   */\n  destroyToken() {\n    localStorage.removeItem('Authorization');\n  },\n  /**\n   * Returns the user represented by the authentication token (null if user is not authenticated).\n   * @function\n   */\n  getUser() {\n    const token = localStorage.getItem('Authorization');\n    let user = null;\n\n    // If a token exists then decode it\n    if (token) {\n      const base64Url = token.split('.')[1];\n      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n      const secondsSinceEpoch = new Date() / 1000;\n      const parsedToken = JSON.parse(window.atob(base64));\n\n      // If current date is after expiration date then destroy it\n      if (secondsSinceEpoch > parsedToken.exp) {\n        this.destroyToken();\n      } else {\n        user = parsedToken;\n      }\n    }\n\n    return user;\n  },\n  logout() {\n    localStorage.removeItem('Authorization');\n  },\n};\n"]}]}