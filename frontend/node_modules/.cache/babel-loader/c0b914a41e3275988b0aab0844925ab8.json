{"remainingRequest":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/babel-loader/lib/index.js!/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/src/views/Accounts.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/src/views/Accounts.vue","mtime":1586821964037},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF1dGggZnJvbSAnQC9hdXRoJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdhY2NvdW50cycsCiAgcHJvcHM6IHsKICAgIGN1cnJlbnRVc2VyOiBPYmplY3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyczogW10sCiAgICAgIGRlbGV0ZVVzZXJJZDogbnVsbCwKICAgICAgZmFtaWx5OiAnJwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEFsbFVzZXJzOiBmdW5jdGlvbiBnZXRBbGxVc2VycygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGZldGNoKCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1JFTU9URV9BUEksICIvYXBpL3VzZXJzLyIpLmNvbmNhdCh0aGlzLmN1cnJlbnRVc2VyLmZhbWlseUlkKSwgewogICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyBhdXRoLmdldFRva2VuKCkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIF90aGlzLnVzZXJzID0gZGF0YTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZVVzZXI6IGZ1bmN0aW9uIGRlbGV0ZVVzZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgZmV0Y2goIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfUkVNT1RFX0FQSSwgIi9hcGkvdXNlci8iKS5jb25jYXQodGhpcy5kZWxldGVVc2VySWQpLCB7CiAgICAgICAgbWV0aG9kOiAnREVMRVRFJywKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyBhdXRoLmdldFRva2VuKCkKICAgICAgICB9LAogICAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICB2YXIgaW5kZXggPSBfdGhpczIudXNlcnMubWFwKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICAgIHJldHVybiB1c2VyLmlkOwogICAgICAgICAgfSkuaW5kZXhPZihfdGhpczIuZGVsZXRlVXNlcklkKTsKCiAgICAgICAgICBfdGhpczIudXNlcnMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICB9CgogICAgICAgIF90aGlzMi5kZWxldGVVc2VySWQgPSBudWxsOwoKICAgICAgICBfdGhpczIuZ2V0QWxsVXNlcnMoKTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGVycik7CiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMudXNlcnMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgYXV0aC5sb2dvdXQoKTsKICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGUtdXNlcicpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgICAgfQogICAgfSwKICAgIGdldGZhbWlseTogZnVuY3Rpb24gZ2V0ZmFtaWx5KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGZldGNoKCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1JFTU9URV9BUEksICIvYXBpL2ZhbWlsaWVzLyIpLmNvbmNhdCh0aGlzLmN1cnJlbnRVc2VyLmZhbWlseUlkKSwgewogICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgYXV0aC5nZXRUb2tlbigpCiAgICAgICAgfSwKICAgICAgICBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBfdGhpczMuZmFtaWx5ID0gZGF0YTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGVycik7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0QWxsVXNlcnMoKTsKICAgIHRoaXMuZ2V0ZmFtaWx5KCk7CiAgfQp9Ow=="},{"version":3,"sources":["Accounts.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"accounts\">\n    <h3 class = \"text-center\">Family Members - {{this.family.familyname}}  </h3>\n    <table class = \"users table table-striped\">\n      <thead class=\"thead-dark\">\n      <tr>\n        <th scope=\"col\">#</th>\n        <th scope=\"col\">Username </th>\n        <th scope=\"col\">parent/child</th>\n        <th scope=\"col\"></th>\n      </tr>\n      </thead>\n      <tbody>\n        <tr class=\"users\" v-for=\"user in users\" v-bind:key=\"user.id\">\n          <td scope=\"row\">{{user.id}}</td>\n          <td>{{user.username}}</td>\n          <td>{{user.role}}</td>\n          <td>\n            <b-button v-if=\"users.length === 1\" variant=\"outline-danger\" size=\"sm\" @click=\"deleteUserId = user.id\"\n            v-b-modal.confirmDeleteFamily>Delete Family Account</b-button>\n            <b-button v-else variant=\"outline-danger\" size=\"sm\" @click=\"deleteUserId = user.id\"\n            v-b-modal.confirmDelete> Delete</b-button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  <router-link\n      :to=\"{ name: 'register', params: { role:'parent'} }\"\n      tag=\"button\"\n      class=\"btn btn-outline-primary btn-sm\"\n       >Add Parent</router-link>\n   <router-link\n      :to=\"{ name: 'register', params: { role:'child'} }\"\n        tag=\"button\"\n        class=\"btn btn-outline-primary btn-sm\"\n        >Add Child</router-link>\n    <p class=\"text-right\"> {{currentUser.familyId}}</p>\n      <!-- Modal Component -->\n  <b-modal\n    id=\"confirmDelete\"\n    title=\"Delete User\"\n    ok-title=\"Delete User\"\n    @ok=\"deleteUser\"\n  >\n    <p class=\"my-4\">Are you sure you want to delete this User? (Warning: deleting this user will \n      delete all reading activity for this user.) </p>\n  </b-modal>\n  <b-modal\n    id=\"confirmDeleteFamily\"\n    title=\"Delete Family Account\"\n    ok-title=\"Delete Family Account\"\n    @ok=\"deleteUser\"\n  >\n    <p class=\"my-4\">Are you sure you want to delete this Family Account? (Warning: deleting this family account will \n      delete all records associated with this family account.) </p>\n  </b-modal>\n  </div>\n</template>\n\n<script>\n\nimport auth from '@/auth';\n\nexport default {\n  name: 'accounts',\n   props: {\n      currentUser: Object\n    },\n   data() {\n     return {\n        users: [],\n        deleteUserId: null,\n        family: ''\n      }\n    },\n  methods: {\n    getAllUsers() {\n      fetch(`${process.env.VUE_APP_REMOTE_API}/api/users/${this.currentUser.familyId}`, {\n        method: 'GET',\n          headers: {\n          Accept: 'application/json',\n          Authorization: 'Bearer ' + auth.getToken()\n          }\n        })\n        .then((response) => {\n          return response.json()\n        })\n        .then((data) => {\n          this.users = data;\n        })\n        .catch((err)=> console.error(err)); \n    },\n   deleteUser() {\n      fetch(`${process.env.VUE_APP_REMOTE_API}/api/user/${this.deleteUserId}`, {\n        method: 'DELETE',\n        headers: {\n          Authorization: 'Bearer ' + auth.getToken(),\n        },\n        credentials: 'same-origin',\n      })\n        .then((response) => {\n          if (response.ok) {\n            const index = this.users.map((user) => user.id).indexOf(this.deleteUserId);\n            this.users.splice(index, 1);\n          }\n          this.deleteUserId = null;\n          this.getAllUsers();\n        })\n        .catch((err) => console.error(err));\n        if (this.users.length === 1) {\n          auth.logout();\n          this.$emit('update-user')\n          this.$router.push('/login');\n        }\n      },\n     getfamily() {\n      fetch(`${process.env.VUE_APP_REMOTE_API}/api/families/${this.currentUser.familyId}`, {\n        method: 'GET',\n        headers: {\n          Authorization: 'Bearer ' + auth.getToken(),\n        },\n        credentials: 'same-origin',\n        })\n        .then((response) => {\n          return response.json()\n        })\n        .then((data) => {\n          this.family = data;\n        })\n        .catch((err)=> console.error(err)); \n      }\n    },\n    created() {\n    this.getAllUsers();\n    this.getfamily();\n  }\n}\n</script>\n\n<style scoped>\n  .bold {\n    font-weight: bold;\n  }\n  button {\n    margin-right: 5px;\n  }\n  span.badge {\n    margin-right:5px;\n  }\n  .actions .btn{\n    margin-top: 0px;\n  }\n\n</style>"],"sourceRoot":"src/views"}]}