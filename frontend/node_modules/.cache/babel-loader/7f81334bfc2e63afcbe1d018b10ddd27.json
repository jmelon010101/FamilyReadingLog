{"remainingRequest":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/babel-loader/lib/index.js!/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/src/views/ActivityLog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/src/views/ActivityLog.vue","mtime":1586912121804},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBhdXRoIGZyb20gJ0AvYXV0aCc7CmltcG9ydCBBZGRSZWFkaW5nQWN0aXZpdHkgZnJvbSAnQC9jb21wb25lbnRzL0FkZFJlYWRpbmdBY3Rpdml0eS52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGN1cnJlbnRVc2VyOiBPYmplY3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2dzOiBbXSwKICAgICAgc2hvd0xvZ0Zvcm06IGZhbHNlLAogICAgICBsb2dGb3JtVG9nZ2xlVGV4dDogJ0FkZCBBY3Rpdml0eScsCiAgICAgIGN1cnJlbnRCb29rczogW10sCiAgICAgIGNvbXBsZXRlZEJvb2tzOiBbXQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEFkZFJlYWRpbmdBY3Rpdml0eTogQWRkUmVhZGluZ0FjdGl2aXR5CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRBbGxMb2dzOiBmdW5jdGlvbiBnZXRBbGxMb2dzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZmV0Y2goIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfUkVNT1RFX0FQSSwgIi9hcGkvYWN0aXZpdHkvdXNlci8iKS5jb25jYXQodGhpcy5jdXJyZW50VXNlci5pZCksIHsKICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgYXV0aC5nZXRUb2tlbigpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBfdGhpcy5sb2dzID0gZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgdG9nZ2xlTG9nRm9ybTogZnVuY3Rpb24gdG9nZ2xlTG9nRm9ybSgpIHsKICAgICAgdGhpcy5zaG93TG9nRm9ybSA9ICF0aGlzLnNob3dMb2dGb3JtOwogICAgICB0aGlzLnNob3dMb2dGb3JtID8gdGhpcy5sb2dGb3JtVG9nZ2xlVGV4dCA9ICdIaWRlIEZvcm0nIDogdGhpcy5sb2dGb3JtVG9nZ2xlVGV4dCA9ICdBZGQgQWN0aXZpdHknOwogICAgfSwKICAgIHRvZ2dsZUFuZExvYWRMb2dzOiBmdW5jdGlvbiB0b2dnbGVBbmRMb2FkTG9ncygpIHsKICAgICAgdGhpcy50b2dnbGVMb2dGb3JtKCk7CiAgICAgIHRoaXMuZ2V0QWxsTG9ncygpOwogICAgICB0aGlzLmdldEN1cnJlbnRCb29rcygpOwogICAgICB0aGlzLmdldENvbXBsZXRlZEJvb2tzKCk7CiAgICB9LAogICAgZ2V0Q3VycmVudEJvb2tzOiBmdW5jdGlvbiBnZXRDdXJyZW50Qm9va3MoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgZmV0Y2goIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfUkVNT1RFX0FQSSwgIi9hcGkvYm9va3MvcGVyc29uYWxib29rc2hlbGYvIikuY29uY2F0KHRoaXMuY3VycmVudFVzZXIuaWQpLCB7CiAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIGF1dGguZ2V0VG9rZW4oKQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMyLmN1cnJlbnRCb29rcyA9IGRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGdldENvbXBsZXRlZEJvb2tzOiBmdW5jdGlvbiBnZXRDb21wbGV0ZWRCb29rcygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBmZXRjaCgiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9SRU1PVEVfQVBJLCAiL2FwaS9ib29rcy9jb21wbGV0ZWQvIikuY29uY2F0KHRoaXMuY3VycmVudFVzZXIuaWQpLCB7CiAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIGF1dGguZ2V0VG9rZW4oKQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMzLmNvbXBsZXRlZEJvb2tzID0gZGF0YTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRBbGxMb2dzKCk7CiAgICB0aGlzLmdldEN1cnJlbnRCb29rcygpOwogICAgdGhpcy5nZXRDb21wbGV0ZWRCb29rcygpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRvdGFsUmVhZGluZ1RpbWU6IGZ1bmN0aW9uIHRvdGFsUmVhZGluZ1RpbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLmxvZ3MucmVkdWNlKGZ1bmN0aW9uICh0b3RhbCwgY3VycmVudCkgewogICAgICAgIHJldHVybiB0b3RhbCArIGN1cnJlbnQubWludXRlc1NwZW50OwogICAgICB9LCAwKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["ActivityLog.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"container\">\n      <h3>Activity Log</h3>\n      <button class=\"btn btn-info\" v-on:click.prevent=\"toggleLogForm\">{{logFormToggleText}}</button>\n      <div id=\"form\" v-if=\"showLogForm == true\">\n        <div v-if=\"showLogForm\">\n        <div id=\"addBookOption\">\n          <p>Not Seeing Your Book?</p>\n          <router-link v-bind:to=\"{name : 'bookshelf'}\" class=\"btn btn-info\" tag=\"button\">Add Book</router-link>\n        </div>\n          <add-reading-activity v-bind:currentUser=\"currentUser\" v-on:add-log=\"toggleAndLoadLogs\"/>\n        </div>\n      </div>\n      <div id=\"activitySummary\">\n        <h4>Activity Summary</h4>\n        <p>Number of Books Completed : {{completedBooks.length}}</p>\n        <p>Reading Time : {{totalReadingTime}} minutes</p>\n        <div v-if=\"currentBooks.length > 0\" class=\"currentBooks\">\n          <p>Currently Reading : </p><p v-for=\"book in currentBooks\" v-bind:key=\"book.bookId\">{{book.title}}</p>\n        </div>\n        <div v-else class=\"currentBooks\">\n          <p>You are not reading any books right now</p>\n        </div>\n      </div>\n      <h4>Recent Activity</h4>\n      <div id=\"log-display-container\">\n        <div class=\"log\" v-for=\"log in logs\" v-bind:key=\"log.logId\">\n          <p><span class=\"grey\">Book :</span> {{log.title}} </p>\n          <p><span class=\"grey\">Duration :</span> {{log.minutesSpent}} minutes</p>\n          <p><span class=\"grey\">Category :</span> {{log.readingFormat}} </p>\n          <p><span class=\"grey\">Notes :</span> {{log.bookNotes}} </p>\n        </div>\n        <div class=\"log\" id=\"blank-log\" v-if=\"logs.length % 2 == 1\">\n        </div>\n      </div>\n  </div>\n</template>\n\n<script>\nimport auth from '@/auth';\nimport AddReadingActivity from '@/components/AddReadingActivity.vue';\nexport default {\n    props: {\n      currentUser: Object\n    },\n  data() {\n    return {\n      logs: [],\n      showLogForm: false,\n      logFormToggleText: 'Add Activity',\n      currentBooks: [],\n      completedBooks: []\n    }\n  },\n  components: {\n    AddReadingActivity\n  },\n  methods: {\n    getAllLogs() {\n        fetch(`${process.env.VUE_APP_REMOTE_API}/api/activity/user/${this.currentUser.id}`, {\n          method: 'GET',\n            headers: {\n            Accept: 'application/json',\n            Authorization: 'Bearer ' + auth.getToken()\n          }\n          })\n          .then((response) => {\n            return response.json();\n          })\n          .then((data) => {\n            this.logs = data;\n          });\n    },\n    toggleLogForm() {\n      this.showLogForm = !this.showLogForm;\n      this.showLogForm ? this.logFormToggleText = 'Hide Form' : this.logFormToggleText = 'Add Activity';\n    },\n    toggleAndLoadLogs() {\n      this.toggleLogForm();\n      this.getAllLogs()\n      this.getCurrentBooks();\n      this.getCompletedBooks();\n    },\n    getCurrentBooks() {\n       fetch(`${process.env.VUE_APP_REMOTE_API}/api/books/personalbookshelf/${this.currentUser.id}`, {\n            method: 'GET',\n              headers: {\n              Accept: 'application/json',\n              Authorization: 'Bearer ' + auth.getToken()\n            }\n            })\n            .then((response) => {\n              return response.json();\n            })\n            .then((data) => {\n              this.currentBooks = data;\n            });\n    },\n    getCompletedBooks() {\n      fetch(`${process.env.VUE_APP_REMOTE_API}/api/books/completed/${this.currentUser.id}`, {\n            method: 'GET',\n              headers: {\n              Accept: 'application/json',\n              Authorization: 'Bearer ' + auth.getToken()\n            }\n            })\n            .then((response) => {\n              return response.json();\n            })\n            .then((data) => {\n              this.completedBooks = data;\n            });\n    }\n  },\n  created() {\n    this.getAllLogs()\n    this.getCurrentBooks();\n    this.getCompletedBooks();\n  },\n  computed: {\n    totalReadingTime: function() {\n      return this.logs.reduce((total, current) => \n        total + current.minutesSpent, 0\n      )\n    }\n  } \n}\n</script>\n\n<style scoped>\np {\n  margin: 0;\n}\n#log-display-container {\n  display: flex;\n  flex-wrap: wrap;\n}\ndiv.log {\n    border: 2px solid lightgrey;\n    border-radius: 10px;\n    margin-top: 2%;\n    padding: 5px;\n    width: 45%;\n    margin-left: auto;\n    margin-right: auto;\n}\nspan.grey {\n  color: grey;\n}\n#form {\n  margin-top: 2%;\n  border: 1px solid grey;\n  border-radius: 10px;\n  padding: 10px;\n  padding-bottom: 0;\n  margin-bottom: 2%;\n  width: 60%;\n}\nbutton.formSwitch {\n  position: absolute;\n  right: 0;\n  margin-right: 42%;\n}\ndiv#activitySummary {\n  margin-top: 3%;\n  margin-bottom: 3%;\n}\ndiv.container {\n  margin-bottom: 3%;\n}\ndiv#addBookOption {\n  position: absolute;\n  right: 0;\n  margin-right: 42%;\n}\ndiv#blank-log {\n  border: none;\n}\n</style>"],"sourceRoot":"src/views"}]}