{"remainingRequest":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/src/components/AddChildActivity.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/src/components/AddChildActivity.vue","mtime":1586912121803},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhdXRoIGZyb20gJ0AvYXV0aCc7CmV4cG9ydCBkZWZhdWx0IHsKICAgIHByb3BzOiB7CiAgICAgIGN1cnJlbnRVc2VyOiBPYmplY3QKICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGFjdGl2aXR5OiB7CiAgICAgICAgICAgICAgICB1c2VySWQ6ICcnLAogICAgICAgICAgICAgICAgYm9va0lkOiAnJywKICAgICAgICAgICAgICAgIHJlYWRpbmdGb3JtYXQ6ICcnLAogICAgICAgICAgICAgICAgbWludXRlc1NwZW50OiAnJywKICAgICAgICAgICAgICAgIGJvb2tOb3RlczogJycsCiAgICAgICAgICAgICAgICBjb21wbGV0ZWRCb29rOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBib29rczogW10sCiAgICAgICAgICAgIGNoaWxkcmVuOiBbXQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgYWRkQWN0aXZpdHkoKSB7CiAgICAgICAgICAgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9SRU1PVEVfQVBJfS9hcGkvYWN0aXZpdHkvYCwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyBhdXRoLmdldFRva2VuKCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGhpcy5hY3Rpdml0eSksCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuJGVtaXQoJ2FkZC1sb2cnKSk7CiAgICAgICAgICAgIGlmICghdGhpcy5hY3Rpdml0eS5jb21wbGV0ZWRCb29rKSB7CiAgICAgICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfUkVNT1RFX0FQSX0vYXBpL2Jvb2tzL3BlcnNvbmFsYm9va3NoZWxmLyR7dGhpcy5hY3Rpdml0eS51c2VySWR9LyR7dGhpcy5hY3Rpdml0eS5ib29rSWR9YCwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyBhdXRoLmdldFRva2VuKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSAKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfUkVNT1RFX0FQSX0vYXBpL2Jvb2tzL3BlcnNvbmFsYm9va3NoZWxmLyR7dGhpcy5hY3Rpdml0eS51c2VySWR9LyR7dGhpcy5hY3Rpdml0eS5ib29rSWR9YCwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIGF1dGguZ2V0VG9rZW4oKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pIAogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAgZ2V0QWxsQm9va3MoKSB7CiAgICAgICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfUkVNT1RFX0FQSX0vYXBpL2Jvb2tzLyR7dGhpcy5jdXJyZW50VXNlci5mYW1pbHlJZH1gLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyBhdXRoLmdldFRva2VuKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib29rcyA9IGRhdGE7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0QWxsQ2hpbGRyZW4oKSB7CiAgICAgICAgICAgICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5WVUVfQVBQX1JFTU9URV9BUEl9L2FwaS91c2Vycy9jaGlsZC8ke3RoaXMuY3VycmVudFVzZXIuZmFtaWx5SWR9YCwgewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIGF1dGguZ2V0VG9rZW4oKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGRhdGE7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIHRoaXMuZ2V0QWxsQm9va3MoKSwKICAgICAgICB0aGlzLmdldEFsbENoaWxkcmVuKCkKICAgIH0KfQo="},{"version":3,"sources":["AddChildActivity.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddChildActivity.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\">\n      <h4>Child Activity Form</h4>\n      <form v-on:submit.prevent=\"addActivity\">\n          <div class=\"form-group\">\n            <p>Reader</p>\n                <select v-model=\"activity.userId\" required>\n                    <option v-for=\"child in children\" v-bind:key=\"child.id\" v-bind:value=\"child.id\">\n                        {{child.username}}\n                    </option>\n                </select>\n          </div>\n          <div class=\"form-group\">\n            <p>Book</p>\n                <select v-model=\"activity.bookId\" required>\n                    <option v-for=\"book in books\" v-bind:key=\"book.bookId\" v-bind:value=\"book.bookId\">\n                        {{book.title}}\n                    </option>\n                </select>\n          </div>\n          <div class=\"form-group\">\n            <p>Form Of Reading</p>\n                <select v-model=\"activity.readingFormat\">\n                    <option>Paper</option>\n                    <option>Digital</option>\n                    <option>Audiobook</option>\n                    <option>Read-Aloud(Reader)</option>\n                    <option>Read-Aloud(Listener)</option>\n                    <option>Other</option>\n                </select>\n          </div>\n          <div class=\"form-group\">\n            <label>Time Spent<b-form-input type=\"text\" v-model=\"activity.minutesSpent\" placeholder=\"minutes\" required/></label>\n          </div>\n          <div class=\"form-group\">\n            <label>Notes<b-form-textarea v-model=\"activity.bookNotes\"/></label>\n          </div>\n          <span>Did They Complete This Book?</span>\n          <b-check v-model=\"activity.completedBook\"></b-check>\n          <b-button id=\"submitButton\" type=\"submit\">Add Child's Activity</b-button>\n      </form>\n  </div>\n</template>\n\n<script>\nimport auth from '@/auth';\nexport default {\n    props: {\n      currentUser: Object\n    },\n    data() {\n        return {\n            activity: {\n                userId: '',\n                bookId: '',\n                readingFormat: '',\n                minutesSpent: '',\n                bookNotes: '',\n                completedBook: false\n            },\n            books: [],\n            children: []\n        }\n    },\n    methods: {\n        addActivity() {\n           fetch(`${process.env.VUE_APP_REMOTE_API}/api/activity/`, {\n                method: 'POST',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    Authorization: 'Bearer ' + auth.getToken()\n                    },\n                body: JSON.stringify(this.activity),\n            })\n            .then(() => this.$emit('add-log'));\n            if (!this.activity.completedBook) {\n            fetch(`${process.env.VUE_APP_REMOTE_API}/api/books/personalbookshelf/${this.activity.userId}/${this.activity.bookId}`, {\n                method: 'POST',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    Authorization: 'Bearer ' + auth.getToken()\n                    }\n                }) \n            } else {\n                fetch(`${process.env.VUE_APP_REMOTE_API}/api/books/personalbookshelf/${this.activity.userId}/${this.activity.bookId}`, {\n                method: 'DELETE',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    Authorization: 'Bearer ' + auth.getToken()\n                    }\n                }) \n            }\n        },\n         getAllBooks() {\n            fetch(`${process.env.VUE_APP_REMOTE_API}/api/books/${this.currentUser.familyId}`, {\n                method: 'GET',\n                headers: {\n                Accept: 'application/json',\n                Authorization: 'Bearer ' + auth.getToken()\n                }\n                })\n                .then((response) => {\n                    return response.json();\n                })\n                .then((data) => {\n                    this.books = data;\n                });\n            },\n            getAllChildren() {\n                fetch(`${process.env.VUE_APP_REMOTE_API}/api/users/child/${this.currentUser.familyId}`, {\n                    method: 'GET',\n                    headers: {\n                    Accept: 'application/json',\n                    Authorization: 'Bearer ' + auth.getToken()\n                    }\n                    })\n                    .then((response) => {\n                        return response.json();\n                    })\n                    .then((data) => {\n                        this.children = data;\n                    });\n            }\n    },\n    created() {\n        this.getAllBooks(),\n        this.getAllChildren()\n    }\n}\n</script>\n\n<style scoped>\n    label {\n        width: 100%;\n    }\n    textarea {\n        height: 100px;\n    }\n    p {\n        margin: 0;\n    }\n    form {\n        padding-bottom: 3%;\n    }\n    div.custom-checkbox {\n        display: inline-block;\n        margin-left: 1%;\n        margin-bottom: 0;\n    }\n     #submitButton {\n        display: block;\n        margin-top: 4%;\n    }\n</style>"]}]}