{"remainingRequest":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/src/components/AddReadingActivity.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/src/components/AddReadingActivity.vue","mtime":1586912121803},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhdXRoIGZyb20gJ0AvYXV0aCc7CmV4cG9ydCBkZWZhdWx0IHsKICAgICBwcm9wczogewogICAgICBjdXJyZW50VXNlcjogT2JqZWN0CiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBhY3Rpdml0eTogewogICAgICAgICAgICAgICAgdXNlcklkOiB0aGlzLmN1cnJlbnRVc2VyLmlkLAogICAgICAgICAgICAgICAgYm9va0lkOiAnJywKICAgICAgICAgICAgICAgIHJlYWRpbmdGb3JtYXQ6ICcnLAogICAgICAgICAgICAgICAgbWludXRlc1NwZW50OiAnJywKICAgICAgICAgICAgICAgIGJvb2tOb3RlczogJycsCiAgICAgICAgICAgICAgICBjb21wbGV0ZWRCb29rOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBib29rczogW10KICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGFkZEFjdGl2aXR5KCkgewogICAgICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfUkVNT1RFX0FQSX0vYXBpL2FjdGl2aXR5L2AsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgYXV0aC5nZXRUb2tlbigpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHRoaXMuYWN0aXZpdHkpLAogICAgICAgICAgICB9KSAgICAKICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy4kZW1pdCgnYWRkLWxvZycpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICghdGhpcy5hY3Rpdml0eS5jb21wbGV0ZWRCb29rKSB7CiAgICAgICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfUkVNT1RFX0FQSX0vYXBpL2Jvb2tzL3BlcnNvbmFsYm9va3NoZWxmLyR7dGhpcy5hY3Rpdml0eS51c2VySWR9LyR7dGhpcy5hY3Rpdml0eS5ib29rSWR9YCwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyBhdXRoLmdldFRva2VuKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSAKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfUkVNT1RFX0FQSX0vYXBpL2Jvb2tzL3BlcnNvbmFsYm9va3NoZWxmLyR7dGhpcy5hY3Rpdml0eS51c2VySWR9LyR7dGhpcy5hY3Rpdml0eS5ib29rSWR9YCwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIGF1dGguZ2V0VG9rZW4oKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pIAogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAgZ2V0QWxsQm9va3MoKSB7CiAgICAgICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfUkVNT1RFX0FQSX0vYXBpL2Jvb2tzLyR7dGhpcy5jdXJyZW50VXNlci5mYW1pbHlJZH1gLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyBhdXRoLmdldFRva2VuKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib29rcyA9IGRhdGE7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5nZXRBbGxCb29rcygpCiAgICB9Cn0KCg=="},{"version":3,"sources":["AddReadingActivity.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddReadingActivity.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\">\n      <h4>Activity Form</h4>\n      <form v-on:submit.prevent=\"addActivity\">\n        <div class=\"form-group\">\n        <p>Book</p>\n            <select v-model=\"activity.bookId\" required>\n                <option v-for=\"book in books\" v-bind:key=\"book.bookId\" v-bind:value=\"book.bookId\">\n                    {{book.title}}\n                </option>\n            </select>\n        </div>\n          <div class=\"form-group\">\n            <p>Form Of Reading</p>\n                <select v-model=\"activity.readingFormat\">\n                    <option>Paper</option>\n                    <option>Digital</option>\n                    <option>Audiobook</option>\n                    <option>Read-Aloud(Reader)</option>\n                    <option>Read-Aloud(Listener)</option>\n                    <option>Other</option>\n                </select>\n          </div>\n          <div class=\"form-group\">\n            <label>Time Spent<b-form-input type=\"text\" v-model=\"activity.minutesSpent\" placeholder=\"minutes\" required/></label>\n          </div>\n          <div class=\"form-group\">\n            <label>Notes<b-form-textarea v-model=\"activity.bookNotes\"/></label>\n          </div>\n          <span>Have You Completed This Book?</span>\n          <b-check v-model=\"activity.completedBook\"></b-check>\n          <b-button id=\"submitButton\" type=\"submit\">Add Your Activity</b-button>\n      </form>\n  </div>\n</template>\n\n<script>\nimport auth from '@/auth';\nexport default {\n     props: {\n      currentUser: Object\n    },\n    data() {\n        return {\n            activity: {\n                userId: this.currentUser.id,\n                bookId: '',\n                readingFormat: '',\n                minutesSpent: '',\n                bookNotes: '',\n                completedBook: false\n            },\n            books: []\n        }\n    },\n    methods: {\n        addActivity() {\n           fetch(`${process.env.VUE_APP_REMOTE_API}/api/activity/`, {\n                method: 'POST',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    Authorization: 'Bearer ' + auth.getToken()\n                    },\n                body: JSON.stringify(this.activity),\n            })    \n            .then(() => this.$emit('add-log'));                                                 \n            if (!this.activity.completedBook) {\n            fetch(`${process.env.VUE_APP_REMOTE_API}/api/books/personalbookshelf/${this.activity.userId}/${this.activity.bookId}`, {\n                method: 'POST',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    Authorization: 'Bearer ' + auth.getToken()\n                    }\n                }) \n            } else {\n                fetch(`${process.env.VUE_APP_REMOTE_API}/api/books/personalbookshelf/${this.activity.userId}/${this.activity.bookId}`, {\n                method: 'DELETE',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    Authorization: 'Bearer ' + auth.getToken()\n                    }\n                }) \n            }\n        },\n         getAllBooks() {\n            fetch(`${process.env.VUE_APP_REMOTE_API}/api/books/${this.currentUser.familyId}`, {\n                method: 'GET',\n                headers: {\n                Accept: 'application/json',\n                Authorization: 'Bearer ' + auth.getToken()\n                }\n                })\n                .then((response) => {\n                    return response.json();\n                })\n                .then((data) => {\n                    this.books = data;\n                });\n            }\n    },\n    created() {\n        this.getAllBooks()\n    }\n}\n\n</script>\n\n<style scoped>\n    label {\n        width: 100%;\n    }\n    textarea {\n        height: 100px;\n    }\n    p {\n        margin: 0;\n    }\n    form {\n        padding-bottom: 3%;\n    }\n    div.custom-checkbox {\n        display: inline-block;\n        margin-left: 1%;\n        margin-bottom: 0;\n    }\n    #submitButton {\n        display: block;\n        margin-top: 4%;\n    }\n</style>"]}]}