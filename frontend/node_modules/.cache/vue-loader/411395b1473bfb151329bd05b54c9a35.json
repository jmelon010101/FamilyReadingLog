{"remainingRequest":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/src/components/AddBook.vue?vue&type=style&index=0&id=597107ac&scoped=true&lang=css&","dependencies":[{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/src/components/AddBook.vue","mtime":1586912121802},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/musicmaster/Desktop/capstone4/capstone-family_reading/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpsYWJlbCB7CiAgICB3aWR0aDogMTAwJTsKfQp0ZXh0YXJlYSB7CiAgICBoZWlnaHQ6IDEwMHB4Owp9CmRpdi5mb3JtLWdyb3VwewogIG1hcmdpbjogMDsKfQpkaXYuY29udGFpbmVyIHsKICBtYXJnaW4tdG9wOiAxJTsKICBib3JkZXI6IDFweCBzb2xpZCBncmV5OwogIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgd2lkdGg6IDQwJTsKICBtYXJnaW4tbGVmdDogMDsKfQpmb3JtIHsKICBwYWRkaW5nLXRvcDogMyU7CiAgcGFkZGluZy1ib3R0b206IDMlOwp9Cg=="},{"version":3,"sources":["AddBook.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddBook.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\">\n      <!-- <h3>Add a Book</h3> -->\n      <form v-on:submit.prevent=\"getBookFromApi\">\n        <div class=\"form-group\">\n            <label>ISBN Number<b-form-input type=\"text\" v-model=\"userInputIsbn\"/></label>\n            <b-button type=\"submit\">Add Book From API</b-button>\n        </div>\n      </form>\n      <form v-on:submit.prevent=\"addBook\">\n          <div class=\"form-group\">\n            <label>Title<b-form-input type=\"text\" v-model=\"book.title\" required/></label>\n          </div>\n          <div class=\"form-group\">\n            <label>Author<b-form-input type=\"text\" v-model=\"book.author\" required/></label>\n          </div>\n          <div class=\"form-group\">\n            <label>ISBN Number<b-form-input type=\"text\" v-model=\"book.isbn\" required/></label>\n          </div>\n          <div class=\"form-group\">\n            <label>Image<b-form-input type=\"text\" v-model=\"book.image\" required/></label>\n          </div>\n          <div class=\"form-group\">\n            <label>Description<b-form-textarea v-model=\"book.description\" required/></label>\n          </div>\n          <b-button type=\"submit\">Add Book</b-button>\n      </form>\n  </div>\n</template>\n\n<script>\nimport auth from '@/auth';\nexport default {\n    props: {\n      currentUser: Object\n    },\n    data() {\n        return {\n            book: {\n                title: '',\n                author: '',\n                isbn: '',\n                image: '',\n                description: '',\n                familyId: this.currentUser.familyId\n            },\n            userInputIsbn: '',\n            \n        }\n    },\n    methods: {\n        addBook() {\n           fetch(`${process.env.VUE_APP_REMOTE_API}/api/books/`, {\n                method: 'POST',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    Authorization: 'Bearer ' + auth.getToken()\n                    },\n                body: JSON.stringify(this.book),\n            })\n            .then(() => this.$emit('add-book'));\n        },\n        getBookFromApi() {\n            fetch(`https://openlibrary.org/api/books?bibkeys=ISBN:${this.userInputIsbn}&jscmd=data&format=json`, {\n            method: 'GET'\n            })\n            .then((response) => {\n              return response.json();\n            })\n            .then((data) => {\n              this.book.title = data[`ISBN:${this.userInputIsbn}`].title;\n              this.book.author = data[`ISBN:${this.userInputIsbn}`].by_statement;\n              this.book.isbn = parseInt(this.userInputIsbn);\n              this.book.image = data[`ISBN:${this.userInputIsbn}`].cover.large;\n              this.book.description = data[`ISBN:${this.userInputIsbn}`].notes;\n            });\n        }\n    }\n}\n</script>\n\n<style scoped>\n    label {\n        width: 100%;\n    }\n    textarea {\n        height: 100px;\n    }\n    div.form-group{\n      margin: 0;\n    }\n    div.container {\n      margin-top: 1%;\n      border: 1px solid grey;\n      border-radius: 10px;\n      width: 40%;\n      margin-left: 0;\n    }\n    form {\n      padding-top: 3%;\n      padding-bottom: 3%;\n    }\n</style>"]}]}